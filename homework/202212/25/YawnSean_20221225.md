### 散列表

- 本质是稀疏数组，单元通常被称为表元，每个键值对占据一个表元（表元中有对键值分别的引用），通过偏移量进行读取。

- 大致保证三分之一左右为空，因此会发生复制。

- 放入的过程中计算散列值，如果对象本身相等，散列值应当维持相等；散列值应当在索引空间中尽可能的分散，相似但不相等的元素应当散列值差别更大。

- `str`, `bytes`, `datetime` 对象的散列值计算过程中多了随机的 **加盐** 这一步，每次启动时产生不同的所加盐值，为了防 DOS 攻击。

- 散列冲突发生在 `search_key` 和 `found_key` 不匹配的情况下；解决方式：再取几位用特殊方法处理，用新数字寻找表元（反复冲突，反复找），实际上是再散列。添加元素和更新类似，可能会重新分配内存，增加用作索引和散列值所占位数，减少冲突概率。

### `dict` 的散列表相关性质

- 键可散列：支持 `hash` 且得到的值不变；支持通过 `__eq__` 判断相等；相等是散列结果相同的充分条件。

- 内存上开销大，因为散列表为了防止冲突是稀疏的；使用元组或记名元组构成的列表存储较大的记录（避免散列表耗费大空间；无需把记录字段的名字在每个元素中存储，整体结构一致）。

- 使用散列表查询很快，键的次序由于散列冲突存在会受添加顺序影响，添加新键也可能改变已有键的顺序（由于扩容）。

- `.keys()`、`.items()` 和 `.values()` 方法返回的都是字典视图，有动态特性，可以实时反馈字典变化。

- `set` 与之类似。