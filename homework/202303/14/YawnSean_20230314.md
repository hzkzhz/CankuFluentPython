#### `@contextmanager` 装饰器

- 减小创建上下文管理器的样本代码量。只需要实现有一个 `yield` 语句的生成器，生成想让 `__enter__` 返回的值。其前后分别是 `__enter__` 和 `__exit__` 准备做的事情，分别在 `with` 语句开始时和结束后执行。

- 实际是一个函数包装实现的过程。

- 这个类的 `__enter__` 方法作用：

    - 调用生成器函数，保存生成器对象；
    - 调用对象的 `next` 执行到 `yield` 的位置；
    - 返回产出值，绑定到目标变量。

- 这个类的 `__exit__` 方法作用：

    - 检查是否抛出异常，有的话调用 `gen.throw(exception)` 在包含 `yield` 哪一行抛出异常。（用 `try: yield; except; finally` 结构捕获异常，避免压制异常）
    - 调用 `next` 继续执行代码。

- 生成器函数的作用更像是协程；在某一点暂停，让客户代码运行，直到客户完成任务。