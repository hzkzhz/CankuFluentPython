# notes

今天跳去看看 with 因为遇到了一个 with 但是没看懂，python还是太菜了

with 语句实现原理建立在上下文管理器之上。

上下文管理器是一个实现 __enter__ 和 __exit__ 方法的类。没想到 with 居然也是通过实现 magic method 的方式实现的。

使用 with 语句确保在嵌套块的末尾调用 __exit__ 方法。

这个概念类似于 try...finally 块的使用。这样我们把东西留在这个scope里面不带出去，一方面不会污染变量名，同时也可以帮助我们回收内存啥的。

清理资源，关闭文件等操作，都可以放在exit()方法中。有点 cpp 里面的 RAII 的意思。